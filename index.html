<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Sparkline</title>
  <script src="bower_components/lodash/dist/lodash.js"></script>
  <script src="bower_components/platform/platform.js"></script>
  <script src="bower_components/polymer/polymer.js"></script>
  <script src="bower_components/jquery/dist/jquery.js"></script>
  <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
  <script src="p5-complete-0.3.6/p5.js"></script>
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
  <link rel="stylesheet" href="app.css">
  <script>
    var getSparkline = function(numbers, container, info) {
      var w = 200;
      var h = 50;
      var circleSize = 6;
      var sketch = function (s) {
        s.setup = function () {
          s.createCanvas(w, h, false, container);
          s.noLoop(0);
          window.sketch = s;
        };

        s.draw = function () {
          s.clear();
          // calculate min, max, sum, avg
          var min = Number.POSITIVE_INFINITY;
          var mini = null;
          var max = Number.NEGATIVE_INFINITY;
          var maxi = null;
          var sum = 0;
          _.each(numbers, function(num, i) {
            if (num == null) { return; }
            if (num > max) {
              max = num;
              maxi = i;
            }
            if (num < min) {
              min = num;
              mini = i;
            }
            sum += num;
          });
          var avg = sum / numbers.length;

          info.min = min;
          info.max = max;
          info.avg = avg;
          info.sum = sum;
          info.first = numbers[0];
          info.last = numbers[numbers.length - 1];

          var xstep = (w - circleSize * 2) / (numbers.length - 1);
          var yScale = (h - circleSize) / (max - min);

          var tranY = function(yIn) {
            return h - (yIn - min) * yScale;
          };
          var transX = function(xIn) {
            return circleSize + xIn * xstep;
          };


//          // draw area
//          s.noStroke();
//          s.fill(0, 154, 166, 128);
//          s.beginShape();
//          s.vertex(transX(0), h);
//          for (var i = 0; i < numbers.length; ++i) {
//            if (numbers[i]) { // skip null
//              s.vertex(transX(i), tranY(numbers[i]));
//            }
//          }
//          s.vertex(transX(numbers.length - 1), h);
//          s.endShape(s.CLOSE);

          // draw line
          s.stroke(0);
          s.beginShape(s.LINES);
          for (var i = 0; i < numbers.length; ++i) {
            if (numbers[i]) { // skip null
              s.vertex(transX(i), tranY(numbers[i]));
            }
          }
          s.endShape();



          // mark avg
          //s.stroke(0);
          //s.line(transX(0), tranY(avg), transX(numbers.length - 1), tranY(avg));

          // mark max
          s.noStroke();
          s.fill(102, 182, 232, 180);
          s.ellipse(transX(maxi), tranY(max), circleSize, circleSize);

          // mark min
          s.noStroke();
          s.fill(102, 182, 232, 180);
          s.ellipse(transX(mini), tranY(min), circleSize, circleSize);

          // mark first
          s.noStroke();
          s.fill(255, 0, 0, 128);
          s.ellipse(transX(0), tranY(info.first), circleSize, circleSize);

          // mark last
          s.noStroke();
          s.fill(255, 0, 0, 128);
          s.ellipse(transX(numbers.length - 1), tranY(info.last), circleSize, circleSize);

          info.mouse.x = s.mouseX;
          info.mouse.y = s.mouseY;

          if (s.mouseX >= transX(0) && s.mouseX <= transX(numbers.length - 1) &&
              s.mouseY >= 0 && s.mouseY <= h) {
            s.stroke(255, 0, 0);
            s.line(s.mouseX, 0, s.mouseX, h);
          }
        };

        s.container = container;
      };
      var myp5 = new p5(sketch, container);
    };

  </script>
</head>
<body>

<polymer-element name="my-sparkline" attributes="numbers info">
  <template>
    <div id="p5-spark"></div>
  </template>
  <script>
    Polymer({
      ready: function() {

        if (!this.info) {
          this.info = {
            mouse: {}
          };
        }

        if (typeof this.numbers === 'string') {
          console.warn("parsing numbers from string");
          this.numbers = JSON.parse(this.numbers);
        }
        getSparkline(this.numbers, this.$["p5-spark"], this.info);
      }
    });
  </script>
</polymer-element>

<polymer-element name="init-data" attributes="data">
  <script>
    Polymer('init-data', {
      ready: function() {
        var IBM = [183.45, 183.23, 190.1, 184.26, 190.07, 182.79, 189.36, 185.17, 187.38, 187.88, 184.06, 187.95, 185.27, 187.47, 187.34, 184.3, 186.63, 187.64, 187.14, 186.44, 184.26, 172.84, 190.68, 174.24, 174.67, 177.25, 192.3, 177.14, 192.0, 179.7, 191.95, 180.24, 191.56, 181.84, 190.41, 189.71, 191.16, 186.0, 192.99, 186.64, 192.25, 185.53, 183.69, 184.16, 187.26, 182.95, 187.38, 191.23, 183.19, 187.97, 187.74, 185.92, 177.36, 176.85, 176.4, 192.96, 179.64, 191.81, 177.9, 182.25, 182.73, 190.09, 188.43, 191.2, 172.9, 190.14, 176.68, 191.72, 191.28, 184.29, 189.99, 186.22, 191.54, 186.37, 185.98, 184.51, 184.37, 185.69, 184.36, 184.78, 183.76, 183.08, 185.94, 185.68, 186.39, 184.89, 187.0, 187.06, 186.46, 188.72, 192.19, 188.76, 190.08, 192.57, 182.82, 181.55, 193.14, 182.26, 189.63, 183.6, 190.22, 182.56, 182.35, 182.25, 181.22, 182.14, 180.88, 193.53, 191.44, 195.11, 196.47, 189.3, 188.91, 191.26, 190.03, 188.39, 196.64, 188.53, 193.29, 188.04, 195.19, 187.22, 195.68, 180.37, 181.71, 181.27, 186.35, 188.42, 197.77, 180.72, 197.02, 196.4, 190.01, 192.27, 192.15, 191.73, 192.36, 192.49, 189.86, 188.49, 190.45, 194.09, 189.83, 193.63, 192.62, 192.5, 195.04, 190.85, 188.25, 191.77, 194.52, 193.55, 192.69, 188.0, 192.49, 187.7, 194.5, 194.57, 182.21, 194.0, 183.9, 191.67, 189.15, 189.64, 186.39, 187.1, 187.68, 185.97, 186.22, 186.76, 186.81, 184.71, 187.9, 186.67, 195.24, 195.78, 194.4, 185.81];
        var DOW = [16040.56, 16133.23, 16560.54, null, 16569.98, 16130.4, 16553.93, 16179.66, 16368.27, 16443.34, 16103.3, 16429.47, 16207.14, 16493.37, 16569.28, 16880.36, 16563.3, 16168.03, 16321.71, 16272.65, 16198.41, 15698.85, 17106.7, 15372.8, 15445.24, 15440.23, 17039.49, 15628.53, 16979.13, 15794.08, 17076.87, 15801.79, 17001.22, 15994.77, 16713.58, 16425.1, 16662.91, 16469.99, 16838.74, 16441.35, 16919.59, null, 15963.94, 16437.05, 16444.76, 16154.39, 16462.74, 16651.8, 16027.59, 16530.94, 16373.86, 16257.94, 15928.56, 17013.87, 15879.11, 17111.42, 15837.88, 17137.36, 16373.34, 17069.58, 16197.35, null, 16414.44, 16417.01, 16458.56, 17122.01, 15848.61, 17079.57, 15738.79, 17067.56, 17078.28, 16722.34, 17098.45, 16743.63, null, 16717.17, 16698.74, 16633.18, 16675.5, null, 16606.27, 16374.31, 16543.08, 16533.06, 16511.86, 16491.31, 16446.81, 16613.97, 16715.44, 16695.47, 16583.34, 16550.97, 16518.54, 17068.71, 17049.0, 16481.94, 16987.51, 17031.14, 17131.97, 16530.55, 16401.02, 16734.19, 16775.74, 16514.37, 16945.92, 16449.25, 16843.88, null, 16924.28, 16943.1, 16737.53, 16836.11, 16781.01, 16808.49, 16361.46, 16448.74, 16501.65, 16501.65, 16558.87, 16512.89, 16535.37, 16580.84, 16867.51, 16412.71, 16846.13, 16572.55, 16851.84, 16256.14, 16826.6, 16245.87, 16921.46, 16947.08, 16937.26, 16818.13, 16956.07, 16437.18, 16906.62, 16170.22, 16026.75, 16173.24, 16262.56, 16424.85, 16408.54, 16906.62, 16985.61, null, 17024.21, 16367.88, 17055.42, 16276.69, 17060.68, 16302.77, 16915.07, 16331.05, 16943.81, 16222.17, 16532.61, 16573.0, 16323.06, 16457.66, 17068.26, 16268.99, 16976.24, 16264.23, 17051.73, 16351.25, 17113.54, 16418.68, 17086.63, 17083.8, 16960.57, 16360.18, 16982.59, 16395.88, 16912.11, 16452.72, 16421.89, 16108.89, 16065.67, 16247.22, 16336.19, 17138.2, 17100.18, 16976.81, 16340.08];
        var SP500 = [1847.61, 1845.12, 1986.51, 1839.78, 1981.6, 1836.25, 1971.74, 1859.45, 1955.06, 1955.18, 1845.16, 1946.72, 1854.29, 1936.92, 1933.75, 1909.57, 1931.59, 1877.03, 1873.81, 1873.91, 1845.73, 1755.2, 1997.65, 1751.64, 1773.43, 1797.02, 2003.37, 1799.84, 1996.74, 1819.75, 2000.72, 1819.26, 2002.28, 1829.83, 1988.4, 1837.88, 1997.92, 1826.77, 2000.02, 1831.37, 2000.12, 1831.98, 1838.63, 1819.2, 1842.37, 1828.75, 1838.13, 1992.37, 1840.76, 1837.49, 1848.38, 1838.88, 1794.19, 1792.5, 1774.2, 1998.98, 1790.29, 1984.13, 1781.56, 1844.86, 1828.46, 1838.7, 1843.8, 2007.71, 1741.89, 2001.54, 1782.59, 1997.45, 1985.54, 1950.79, 1988.44, 1951.27, 1995.69, 1949.44, 1940.46, 1927.88, 1924.24, 1924.97, 1923.57, 1911.91, 1920.03, 1909.78, 1900.53, 1892.49, 1888.03, 1872.83, 1885.08, 1877.86, 1870.85, 1888.53, 1897.45, 1845.89, 1878.48, 1896.65, 1959.48, 1962.87, 1869.43, 1941.99, 1863.4, 1956.98, 1878.61, 1936.16, 1937.78, 1943.89, 1930.11, 1962.61, 1949.98, 1883.68, 1881.14, 1878.33, 1883.95, 1878.21, 1875.63, 1884.66, 1867.72, 1974.62, 1872.18, 1985.44, 1851.96, 1977.65, 1815.69, 1963.71, 1833.08, 1957.22, 1960.96, 1960.23, 1973.32, 1972.83, 1830.61, 1959.53, 1842.98, 1862.31, 1864.85, 1871.89, 1879.55, 1875.39, 1981.57, 1958.12, 1977.1, 1973.28, 1857.62, 1983.53, 1849.04, 1987.01, 1852.56, 1978.22, 1865.62, 1973.63, 1857.44, 1865.09, 1845.04, 1890.9, 1888.77, 1967.57, 1872.34, 1964.68, 1885.52, 1969.95, 1841.13, 1970.07, 1846.34, 1930.67, 1925.15, 1938.99, 1877.17, 1920.21, 1878.04, 1920.24, 1868.2, 1867.63, 1872.25, 1860.77, 1872.01, 1866.52, 1987.98, 1978.91, 1978.34, 1858.83];
        var NASDAQ = [2827.56, 2843.25, 3771.48, 3817.98, 3781.59, 3807.75, 2872.53, 3770.38, 2873.54, 3815.02, 2847.54, 3774.34, 2869.88, 3760.75, 2828.23, 2814.72, 3694.83, 2864.08, 3677.78, 2841.62, 2903.88, 3021.01, 2927.23, 3050.39, 3044.36, 3054.53, 2959.85, 2915.83, 2931.83, 2931.39, 3012.6, 2956.98, 3022.3, 2933.17, 2948.57, 2951.78, 3010.6, 2971.33, 2992.16, 3013.81, 2758.9, 3722.18, 3717.85, 3745.7, 2845.06, 3783.64, 2863.04, 3789.38, 2828.47, 3774.73, 2782.31, 3765.29, 2783.21, 3768.25, 2815.0, 3761.1, 2823.31, 3787.43, 2803.32, 2300.05, 2963.75, 2996.69, 3715.97, 2301.09, 3002.2, 2308.71, 2986.76, 2989.27, 2308.42, 2966.16, 2973.7, 2307.9, 2988.97, 2986.96, 2282.31, 2966.89, 2978.04, 2871.89, 2312.41, 2950.48, 2317.17, 2976.19, 2935.69, 2910.32, 2287.99, 2316.74, 2970.42, 2991.78, 2967.79, 3010.24, 3012.03, 3620.3, 2796.14, 2780.42, 2791.19, 2799.82, 3729.02, 2789.6, 3725.01, 2789.19, 3660.01, 2776.79, 3706.18, 2781.07, 3649.04, 2730.68, 3658.78, 2756.89, 3589.87, 3612.61, 2728.08, 2710.67, 2976.78, 2724.7, 2966.85, 2710.76, 2926.55, 2916.68, 2916.07, 3593.35, 2853.13, 3578.52, 2836.94, 2846.81, 2883.89, 2818.31, 2904.25, 2786.64, 2784.17, 2786.7, 2788.33, 2769.71, 2802.51, 2820.16, 2825.88, 3599.79, 2760.22, 3638.71, 2764.65, 3657.79, 2735.38, 3657.57, 2744.97, 3606.12, 2981.7, 3602.78, 2771.51, 3589.09, 2744.79, 3613.59, 2761.52, 2811.94, 2937.29, 2816.55, 3011.93, 2848.27, 2904.87, 2813.84, 2895.58, 3684.44, 3020.06, 3669.95, 2977.23, 2805.28, 2999.66, 3669.27, 2982.13, 2915.86, 2987.95, 2986.12, 2905.66, 2859.68, 2904.08, 2901.99, 4062.52, 4033.17, 4038.0, 2991.22, 3047.08, 4017.75, 3994.57, 3991.65, 4037.2, 4045.26, 4059.89, 4044.75, 3049.41, 3011.33, 3101.17, 2988.4, 3104.12, 3016.46, 3044.11, 3055.55, 3064.18, 3007.56, 3016.96, 3000.45, 2990.46, 3042.82, 3072.87, 3031.45, 3005.62, 3931.55, 3949.07, 3969.16, 2700.97, 3921.27, 2616.82, 2970.45, 2667.33, 2643.67, 3029.63, 2636.05, 2961.6, 2683.87, 2692.09, 3919.79, 2736.42, 3919.23, 2698.3, 3965.58, 3919.92, 2743.06, 3985.97, 3972.74, 3050.61, 3069.2, 3046.36, 3050.44, 3059.85, 3024.3, 2956.34, 3857.33, 3931.95, 3939.86, 3936.59, 3922.04, 3919.71, 3930.62, 3952.34, 3940.13, 3943.36, 3075.32, 3063.32, 3078.32, 3074.15, 3056.37, 3055.26, 3039.88, 3040.73, 2988.34, 2983.66, 3928.96, 3907.07, 3067.92, 3914.28, 3863.15, 3929.57, 3920.05, 3815.28, 3791.87, 3839.43, 3794.01, 3080.5, 3091.57, 3119.7, 3113.57, 3068.09, 3122.57, 3120.35, 3104.96, 3095.36, 3244.37, 3232.09, 3222.37, 3224.13, 3182.03, 3169.74, 3160.19, 3162.26, 4023.68, 3116.25, 4070.06, 3129.65, 4000.98, 4029.52, 4003.81, 3998.4, 4068.75, 4060.49, 4058.14, 4104.74, 3192.0, 3186.49, 3196.88, 3198.66, 3192.03, 3213.59, 3164.41, 3131.49, 3161.82, 3193.87, 3153.66, 2648.36, 3142.31, 2669.86, 3149.71, 2605.15, 3154.3, 2648.72, 3131.17, 2702.5, 3171.58, 3142.13, 2674.22, 3179.1, 2676.56, 3168.48, 3165.13, 2589.98, 2613.74, 2625.2, 3110.78, 3117.54, 3136.0, 3134.71, 3121.76, 3125.63, 3117.5, 3143.18, 3153.67, 3130.38, 3112.26, 3100.57, 2960.31, 3019.51, 2990.16, 2985.91, 3091.81, 3105.81, 3101.66, 3098.81, 4552.76, 4518.9, 4567.6, 4591.81, 4586.52, 4592.29, 4552.29, 4242.62, 4237.2, 4225.08, 4247.95, 4185.81, 4237.07, 4131.54, 4154.34, 4125.81, 4096.89, 4234.08, 4368.68, 4350.35, 4359.33, 4368.04, 4397.93, 4408.18, 4379.76, 4379.05, 4485.93, 4457.73, 4458.65, 4321.1, 2902.58, 2933.82, 2858.83, 2874.04, 2834.43, 2893.76, 2839.96, 2778.79, 2842.8, 2813.69, 2766.25, 2764.79, 4251.64, 4296.23, 4321.4, 4336.24, 4338.0, 4331.93, 4297.63, 4310.65, 4362.84, 4337.23, 2756.38, 2744.61, 2669.24, 2693.07, 2957.76, 2946.27, 2934.71, 2933.64, 4442.7, 4444.91, 4449.56, 4472.11, 4473.7, 4456.02, 2781.91, 2796.92, 2859.81, 2802.62, 2872.66, 2814.23, 2826.52, 2765.11, 2789.8, 2762.67, 4383.89, 4352.84, 4369.77, 4352.64, 4462.9, 4440.42, 4415.49, 4416.39, 4391.46, 4451.53, 4396.2, 4419.03, 2669.19, 2686.75, 2652.89, 2688.28, 2834.02, 2825.77, 2740.49, 2729.31, 2816.03, 2773.52, 4425.97, 4363.45, 4432.15, 4424.7, 4570.64, 4557.35, 4538.55, 4532.1, 2684.87, 2643.73, 2675.38, 2623.7, 2631.46, 2678.72, 2639.69, 2687.26, 2629.66, 2616.48, 4557.7, 4580.27, 4569.62, 4562.29, 4582.9, 4598.19, 4572.56, 4334.97, 4355.05, 4401.33, 4370.9, 4389.25, 2746.16, 2761.38, 2796.86, 2782.92, 2769.19, 2835.3, 2732.78, 2773.31, 2701.56, 2702.56, 4434.13, 4453.0, 4464.93, 4508.31, 4527.51, 4526.48, 3229.1, 3254.19, 3249.07, 3237.59, 3245.12, 3258.93, 3252.87, 3242.32, 2179.76, 2178.95, 2215.7, 2209.44, 2181.87, 2173.48, 2208.63, 2839.08, 2190.27, 2847.21, 2305.69, 2277.17, 2760.01, 2747.48, 2827.34, 2837.36, 2870.99, 2837.53, 2839.38, 2850.12, 2459.67, 2479.39, 2490.85, 2497.29, 2436.95, 2457.39, 2233.75, 2503.26, 2114.03, 2507.37, 2119.97, 2507.41, 2200.01, 2504.84, 2176.84, 2123.76, 2511.48, 2141.54, 2523.45, 2118.69, 2153.63, 2492.68, 2381.05, 2555.2, 2159.63, 2507.98, 2532.41, 2556.39, 2482.52, 2357.69, 3216.49, 2540.27, 3264.63, 2577.34, 3300.16, 3294.95, 2533.52, 3206.06, 2562.98, 3233.55, 2578.78, 3204.67, 2578.98, 3166.36, 2580.05, 2513.82, 2355.83, 2315.61, 2555.52, 2303.25, 2518.21, 2301.32, 3237.86, 3297.25, 2208.89, 2576.11, 2228.87, 2562.11, 2479.85, 2419.63, 2285.71, 2892.42, 2289.77, 2859.09, 2236.2, 2930.45, 2242.48, 2579.46, 2929.76, 2380.43, 2849.49, 2875.32, 2854.06, 3222.25, 2836.16, 2467.69, 2446.06, 2345.38, 2951.23, 2341.84, 2935.05, 3252.48, 2469.84, 3256.52, 2476.01, 3267.52, 2514.4, 3239.17, 2518.12, 3254.86, 2532.02, 3218.6, 2494.95, 3224.98, 2543.12, 3203.86, 2534.56, 2525.22, 2370.75, 2498.23, 2368.62, 2344.52, 3235.3, 2532.15, 2349.35, 2495.09, 2334.55, 2607.07, 2327.08, 2572.55, 2381.22, 2778.11, 2369.77, 2379.59, 2831.02, 2376.56, 2844.72, 3245.0, 2809.73, 3222.6, 2858.42, 2480.33, 2818.61, 2546.04, 2843.07, 2548.94, 2872.8, 2473.83, 2836.33, 2467.99, 2529.14, 2895.33, 3436.58, 2289.09, 3409.17, 2261.8, 3413.27, 2307.16, 3396.63, 2309.8, 2305.88, 2305.93, 2243.6, 2243.96, 3496.43, 3498.97, 3465.24, 3471.62, 3462.61, 2254.23, 3438.79, 2217.42, 2483.23, 2516.69, 2538.19, 2455.67, 2612.83, 2590.24, 2622.31, 2480.76, 2546.83, 2491.58, 3269.33, 2091.79, 2093.88, 3289.99, 2159.47, 3269.65, 2175.4, 2220.65, 2135.18, 2109.24, 2101.36, 3378.63, 3340.62, 3392.97, 3307.02, 2196.45, 3279.26, 3299.13, 3328.79, 2506.82, 2479.35, 2566.05, 2583.03, 2415.4, 2335.83, 2404.82, 2460.51, 2223.48, 2604.73, 2620.24, 3424.05, 2179.05, 3401.48, 2198.23, 2249.84, 2249.08, 3400.43, 2245.89, 3436.95, 2269.47, 3473.77, 2222.49, 3469.22, 2187.33, 3482.18, 3452.13, 3423.56, 3445.36, 2667.85, 2604.04, 2598.62, 2614.92, 2657.43, 2638.42, 2650.67, 2637.46, 2699.44, 2738.63, 2242.03, 2198.36, 2251.69, 2254.7, 3502.12, 2295.36, 2283.52, 3459.42, 2303.57, 3463.3, 2293.06, 3488.89, 2288.47, 3459.14, 3491.3, 3467.52, 3465.37, 3455.91, 3445.26, 2684.41, 2737.15, 2606.96, 2639.98, 2697.97, 2686.15, 2695.25, 2727.49, 2621.65, 2625.15, 2296.43, 2264.56, 2288.25, 3160.78, 3179.96, 3093.7, 3117.73, 3177.8, 3178.67, 3175.96, 3182.62, 3598.5, 3610.0, 3520.76, 3578.3, 3600.08, 3155.83, 3607.49, 3183.95, 3443.67, 3479.38, 3484.83, 3504.26, 3104.53, 3104.02, 3136.42, 3135.81, 3069.27, 3075.06, 3066.96, 3048.71, 3114.31, 3433.4, 3403.25, 3434.49, 3376.22, 3401.86, 3081.19, 3320.76, 3347.89, 3364.64, 3357.25, 3443.2, 3136.19, 3149.46, 3135.23, 3120.04, 3611.28, 3051.78, 3065.02, 3112.35, 3626.37, 3579.27, 3579.6, 3587.61, 3600.39, 3599.14, 3116.23, 3616.47, 3113.53, 3605.19, 3613.16, 3136.6, 2893.25, 2958.09, 2945.84, 2939.52, 2417.92, 2925.3, 2402.33, 2890.15, 2435.38, 2862.99, 2441.23, 2854.24, 2380.66, 2399.83, 2401.91, 2942.6, 2383.67, 2965.9, 2468.77, 2480.66, 2910.04, 2908.47, 2896.94, 2887.98, 2866.19, 2931.77, 2902.33, 2976.12, 2937.33, 2976.08, 3073.19, 3077.14, 3030.93, 3062.39, 3076.59, 3076.21, 3067.26, 3073.67, 3053.4, 3069.79, 3016.98, 3020.86, 3022.52, 2909.77, 2967.9, 2920.21, 3011.25, 3018.64, 2989.91, 3015.86, 4080.76, 4138.06, 4051.5, 2235.9, 4067.67, 2234.22, 4143.86, 2242.03, 4071.87, 2213.44, 4100.63, 2280.79, 4130.17, 4090.59, 2238.26, 4069.29, 2273.57, 4123.9, 2332.21, 2326.35, 2292.31, 2280.68, 4121.55, 4075.56, 2125.43, 4148.34, 2141.12, 4126.97, 2126.05, 4161.46, 2150.87, 4127.45, 2147.87, 4114.56, 2177.41, 4103.54, 2183.53, 4074.4, 2214.19, 4086.23, 4095.52, 2226.29, 2243.87, 2241.71, 2171.2, 3999.73, 2179.0, 4054.11, 2147.35, 4034.16, 2203.73, 4022.69, 2221.41, 4079.75, 2205.29, 4127.73, 2210.8, 4183.9, 2291.25, 4112.99, 2265.7, 2190.91, 2190.06, 4268.04, 4276.46, 4237.74, 4198.99, 4155.76, 4151.23, 4173.58, 4234.27, 4226.39, 4276.79, 2320.4, 4307.6, 4319.29, 4279.95, 4333.31, 2471.73, 2471.47, 2522.95, 2498.74, 2424.25, 2511.92, 2461.19, 2265.64, 2374.67, 2402.29, 2319.64, 2457.87, 2454.05, 2504.86, 2465.99, 2515.69, 2481.26, 2480.11, 2500.31, 2504.61, 2519.07, 2530.15, 2410.69, 2404.36, 2395.13, 2397.41, 2398.76, 2431.16, 2436.81, 2429.53, 2436.81, 2397.96, 2402.58, 2378.01, 2362.21, 2358.95, 2340.68, 2367.66, 2368.46, 2391.28, 2374.41, 2395.4, 2415.24, 2389.09, 4156.59, 4154.2, 4155.42, 4167.18, 4131.91, 4113.68, 4176.59, 4143.07, 2817.18, 2649.21, 2809.44, 2649.56, 4153.18, 2655.76, 2626.93, 2833.95, 2831.58, 2825.56, 2646.85, 2804.35, 2596.38, 2737.9, 2781.05, 2756.42, 2722.99, 2620.34, 2626.2, 2527.34, 2515.51, 4156.19, 4165.61, 2587.99, 2639.61, 2686.89, 2523.14, 2572.5, 2751.19, 2460.08, 2700.08, 2521.28, 2753.88, 2749.56, 2441.51, 2769.3, 2783.99, 2797.05, 2789.07, 2790.45, 2678.75, 2657.22, 2686.2, 4148.9, 2218.71, 2158.85, 2170.57, 2173.9, 2219.17, 2303.03, 2281.07, 2195.88, 2222.33, 2257.04, 2277.68, 2210.95, 2213.55, 2229.04, 2204.01, 2298.37, 2317.26, 2354.23, 2346.85, 2784.67, 2394.36, 2798.74, 2618.64, 2765.77, 2745.63, 2782.27, 2603.73, 2523.14, 2748.07, 2599.45, 2737.41, 2577.97, 2579.27, 2539.31, 2541.01, 2555.33, 2751.72, 2701.02, 2715.61, 2612.26, 2375.31, 2425.02, 2617.22, 2637.31, 4357.97, 4351.97, 4277.3, 4308.12, 4352.13, 4336.22, 4334.45, 4260.42, 4245.4, 4307.19, 4323.33, 2671.48, 2667.61, 2649.56, 2642.97, 2666.93, 2662.88, 2667.27, 2665.6, 2549.43, 4240.67, 4201.29, 4272.78, 4244.02, 4267.55, 4237.95, 2627.72, 4263.41, 4292.97, 4287.59, 4292.06, 4318.93, 2591.46, 2579.35, 2598.49, 2594.92, 2616.67, 2609.16, 2624.91, 2637.54, 2765.85, 2725.36, 2735.29, 2755.3, 4011.55, 4031.52, 3996.96, 4103.88, 4123.13, 4051.43, 4097.96, 4148.17, 4191.05, 4057.12, 4125.86, 2755.28, 2739.5, 2719.25, 2717.55, 2689.54, 2704.29, 2662.98, 2652.87, 2691.52, 4197.58, 4218.69, 4243.0, 4225.76, 4113.3, 4174.67, 4214.88, 4183.02, 4218.88, 4128.17, 4083.61, 3654.01, 2716.83, 3665.77, 2707.8, 3660.11, 3669.12, 2737.33, 3675.74, 2702.2, 2681.25, 3692.95, 2703.17, 3689.59, 2709.89];
        this.data = [
//          { name: "Random", numbers: [4, 1, 2, 1, 2, 1, 5, 3] },
//          { name: "Random2", numbers: [7, 9, 8, 5, 4, 1, 2] },
          { name: "IBM", numbers: IBM },
          { name: "DOW", numbers: DOW },
          { name: "SP500", numbers: SP500 },
          { name: "NASDAQ", numbers: NASDAQ }
        ];
      }
    });
  </script>
</polymer-element>

<polymer-element name="my-app">
  <template>
    <style>
      table {
        text-align: center;
        border: none;
        border-collapse:collapse;
      }
      .right {
        text-align: right;
        padding-right: 10px;
        min-width: 100px;
      }
      th.underline {
        border-bottom: solid;
        border-bottom-color: #bbbbbb;
        border-bottom-width: 1px;
      }
      td {
        min-width: 80px;
      }
      .red {
        color: #FF0000;
      }
      .blue {
        color: #66B6E8;
      }
    </style>
    <init-data data="{{data}}"></init-data>
    <table class="aaa">
      <tr>
        <th></th>
        <th class="underline">2014.01.01</th>
        <th class="underline">YTD</th>
        <th class="underline">2014.09.17</th>
        <th class="underline">low</th>
        <th class="underline">high</th>
      </tr>
      <template repeat="{{d in data}}">
      <tr>
        <td class="right">{{d.name}}</td>
        <td class="red">{{d.info.first}}</td>
        <td><my-sparkline counter="10" numbers="{{d.numbers}}" info="{{d.info}}"></my-sparkline></td>
        <td class="red">{{d.info.last}}</td>
        <td class="blue">{{d.info.min}}</td>
        <td class="blue">{{d.info.max}}</td>
      </tr>
      </template>
    </table>
  </template>
  <script>
    Polymer('my-app', {
      ready: function() {
      }
    });
  </script>
</polymer-element>

<my-app ></my-app>

</body>
</html>