<polymer-element name="data-factory" attributes="data">
  <script>
    var smooth = function(input, step) {
      step = step || 4;
      var output = [];
      for (var i = 0; i < input.length + step; i+=step) {
        var sum = 0;
        var count = 0;
        for (var s = 0; s < step; s++) {
          if (input[i + s] != null) {
            count++;
            sum += input[i + s];
          }
        }
        if (count) {
          output.push(sum/count);
        }
      }
      return output;
    };

    Polymer('data-factory', {
      ready: function() {
        var IBM = [183.45, 183.23, 190.1, 184.26, 190.07, 182.79, 189.36, 185.17, 187.38, 187.88, 184.06, 187.95, 185.27, 187.47, 187.34, 184.3, 186.63, 187.64, 187.14, 186.44, 184.26, 172.84, 190.68, 174.24, 174.67, 177.25, 192.3, 177.14, 192.0, 179.7, 191.95, 180.24, 191.56, 181.84, 190.41, 189.71, 191.16, 186.0, 192.99, 186.64, 192.25, 185.53, 183.69, 184.16, 187.26, 182.95, 187.38, 191.23, 183.19, 187.97, 187.74, 185.92, 177.36, 176.85, 176.4, 192.96, 179.64, 191.81, 177.9, 182.25, 182.73, 190.09, 188.43, 191.2, 172.9, 190.14, 176.68, 191.72, 191.28, 184.29, 189.99, 186.22, 191.54, 186.37, 185.98, 184.51, 184.37, 185.69, 184.36, 184.78, 183.76, 183.08, 185.94, 185.68, 186.39, 184.89, 187.0, 187.06, 186.46, 188.72, 192.19, 188.76, 190.08, 192.57, 182.82, 181.55, 193.14, 182.26, 189.63, 183.6, 190.22, 182.56, 182.35, 182.25, 181.22, 182.14, 180.88, 193.53, 191.44, 195.11, 196.47, 189.3, 188.91, 191.26, 190.03, 188.39, 196.64, 188.53, 193.29, 188.04, 195.19, 187.22, 195.68, 180.37, 181.71, 181.27, 186.35, 188.42, 197.77, 180.72, 197.02, 196.4, 190.01, 192.27, 192.15, 191.73, 192.36, 192.49, 189.86, 188.49, 190.45, 194.09, 189.83, 193.63, 192.62, 192.5, 195.04, 190.85, 188.25, 191.77, 194.52, 193.55, 192.69, 188.0, 192.49, 187.7, 194.5, 194.57, 182.21, 194.0, 183.9, 191.67, 189.15, 189.64, 186.39, 187.1, 187.68, 185.97, 186.22, 186.76, 186.81, 184.71, 187.9, 186.67, 195.24, 195.78, 194.4, 185.81];
        var DOW = [16040.56, 16133.23, 16560.54, null, 16569.98, 16130.4, 16553.93, 16179.66, 16368.27, 16443.34, 16103.3, 16429.47, 16207.14, 16493.37, 16569.28, 16880.36, 16563.3, 16168.03, 16321.71, 16272.65, 16198.41, 15698.85, 17106.7, 15372.8, 15445.24, 15440.23, 17039.49, 15628.53, 16979.13, 15794.08, 17076.87, 15801.79, 17001.22, 15994.77, 16713.58, 16425.1, 16662.91, 16469.99, 16838.74, 16441.35, 16919.59, null, 15963.94, 16437.05, 16444.76, 16154.39, 16462.74, 16651.8, 16027.59, 16530.94, 16373.86, 16257.94, 15928.56, 17013.87, 15879.11, 17111.42, 15837.88, 17137.36, 16373.34, 17069.58, 16197.35, null, 16414.44, 16417.01, 16458.56, 17122.01, 15848.61, 17079.57, 15738.79, 17067.56, 17078.28, 16722.34, 17098.45, 16743.63, null, 16717.17, 16698.74, 16633.18, 16675.5, null, 16606.27, 16374.31, 16543.08, 16533.06, 16511.86, 16491.31, 16446.81, 16613.97, 16715.44, 16695.47, 16583.34, 16550.97, 16518.54, 17068.71, 17049.0, 16481.94, 16987.51, 17031.14, 17131.97, 16530.55, 16401.02, 16734.19, 16775.74, 16514.37, 16945.92, 16449.25, 16843.88, null, 16924.28, 16943.1, 16737.53, 16836.11, 16781.01, 16808.49, 16361.46, 16448.74, 16501.65, 16501.65, 16558.87, 16512.89, 16535.37, 16580.84, 16867.51, 16412.71, 16846.13, 16572.55, 16851.84, 16256.14, 16826.6, 16245.87, 16921.46, 16947.08, 16937.26, 16818.13, 16956.07, 16437.18, 16906.62, 16170.22, 16026.75, 16173.24, 16262.56, 16424.85, 16408.54, 16906.62, 16985.61, null, 17024.21, 16367.88, 17055.42, 16276.69, 17060.68, 16302.77, 16915.07, 16331.05, 16943.81, 16222.17, 16532.61, 16573.0, 16323.06, 16457.66, 17068.26, 16268.99, 16976.24, 16264.23, 17051.73, 16351.25, 17113.54, 16418.68, 17086.63, 17083.8, 16960.57, 16360.18, 16982.59, 16395.88, 16912.11, 16452.72, 16421.89, 16108.89, 16065.67, 16247.22, 16336.19, 17138.2, 17100.18, 16976.81, 16340.08];
        var SP500 = [1847.61, 1845.12, 1986.51, 1839.78, 1981.6, 1836.25, 1971.74, 1859.45, 1955.06, 1955.18, 1845.16, 1946.72, 1854.29, 1936.92, 1933.75, 1909.57, 1931.59, 1877.03, 1873.81, 1873.91, 1845.73, 1755.2, 1997.65, 1751.64, 1773.43, 1797.02, 2003.37, 1799.84, 1996.74, 1819.75, 2000.72, 1819.26, 2002.28, 1829.83, 1988.4, 1837.88, 1997.92, 1826.77, 2000.02, 1831.37, 2000.12, 1831.98, 1838.63, 1819.2, 1842.37, 1828.75, 1838.13, 1992.37, 1840.76, 1837.49, 1848.38, 1838.88, 1794.19, 1792.5, 1774.2, 1998.98, 1790.29, 1984.13, 1781.56, 1844.86, 1828.46, 1838.7, 1843.8, 2007.71, 1741.89, 2001.54, 1782.59, 1997.45, 1985.54, 1950.79, 1988.44, 1951.27, 1995.69, 1949.44, 1940.46, 1927.88, 1924.24, 1924.97, 1923.57, 1911.91, 1920.03, 1909.78, 1900.53, 1892.49, 1888.03, 1872.83, 1885.08, 1877.86, 1870.85, 1888.53, 1897.45, 1845.89, 1878.48, 1896.65, 1959.48, 1962.87, 1869.43, 1941.99, 1863.4, 1956.98, 1878.61, 1936.16, 1937.78, 1943.89, 1930.11, 1962.61, 1949.98, 1883.68, 1881.14, 1878.33, 1883.95, 1878.21, 1875.63, 1884.66, 1867.72, 1974.62, 1872.18, 1985.44, 1851.96, 1977.65, 1815.69, 1963.71, 1833.08, 1957.22, 1960.96, 1960.23, 1973.32, 1972.83, 1830.61, 1959.53, 1842.98, 1862.31, 1864.85, 1871.89, 1879.55, 1875.39, 1981.57, 1958.12, 1977.1, 1973.28, 1857.62, 1983.53, 1849.04, 1987.01, 1852.56, 1978.22, 1865.62, 1973.63, 1857.44, 1865.09, 1845.04, 1890.9, 1888.77, 1967.57, 1872.34, 1964.68, 1885.52, 1969.95, 1841.13, 1970.07, 1846.34, 1930.67, 1925.15, 1938.99, 1877.17, 1920.21, 1878.04, 1920.24, 1868.2, 1867.63, 1872.25, 1860.77, 1872.01, 1866.52, 1987.98, 1978.91, 1978.34, 1858.83];
        var NASDAQ = [4292.97, 4287.59, 4526.48, 4267.55, 4527.51, 4263.41, 4508.31, 4308.12, 4464.93, 4453.0, 4292.06, 4434.13, 4318.93, 4401.33, 4389.25, 4334.97, 4370.9, 4352.13, 4357.97, 4351.97, 4277.3, 4031.52, 4562.29, 4011.55, 4057.12, 4125.86, 4580.27, 4148.17, 4557.7, 4191.05, 4572.56, 4201.29, 4598.19, 4240.67, 4538.55, 4153.18, 4557.35, 4113.68, 4570.64, 4131.91, 4569.62, 4143.07, 4244.02, 4113.3, 4174.67, 4237.95, 4156.19, 4532.1, 4272.78, 4165.61, 4214.88, 4183.02, 4123.13, 4097.96, 4051.43, 4552.76, 4128.17, 4518.9, 4083.61, 4243.0, 4218.88, 4197.58, 4225.76, 4582.9, 3996.96, 4592.29, 4103.88, 4591.81, 4567.6, 4338.0, 4552.29, 4336.24, 4586.52, 4321.4, 4296.23, 4251.64, 4234.08, 4237.2, 4242.62, 4237.07, 4247.95, 4225.08, 4185.81, 4154.34, 4131.54, 4096.89, 4125.81, 4090.59, 4069.29, 4100.63, 4130.17, 4218.69, 4071.87, 4143.86, 4359.33, 4368.04, 4074.4, 4337.23, 4075.56, 4362.84, 4148.34, 4310.65, 4321.1, 4331.93, 4297.63, 4368.68, 4350.35, 4127.45, 4123.9, 4103.54, 4114.56, 4067.67, 4051.5, 4138.06, 4080.76, 4457.73, 4183.9, 4485.93, 4112.99, 4451.53, 3999.73, 4391.46, 4054.11, 4379.05, 4397.93, 4408.18, 4458.65, 4419.03, 4022.69, 4379.76, 4034.16, 4086.23, 4095.52, 4121.55, 4161.46, 4126.97, 4425.97, 4363.45, 4440.42, 4416.39, 4155.76, 4456.02, 4151.23, 4473.7, 4173.58, 4432.15, 4234.27, 4424.7, 4226.39, 4127.73, 4079.75, 4276.46, 4237.74, 4415.49, 4198.99, 4396.2, 4268.04, 4442.7, 4245.4, 4462.9, 4260.42, 4369.77, 4352.64, 4383.89, 4334.45, 4352.84, 4336.22, 4355.05, 4323.33, 4307.19, 4333.31, 4307.6, 4319.29, 4276.79, 4472.11, 4444.91, 4449.56, 4279.95];

        this.data = [
          { name: "IBM", numbers: smooth(IBM) },
          { name: "DOW", numbers: smooth(DOW) },
          { name: "SP500", numbers: smooth(SP500) },
          { name: "NASDAQ", numbers: smooth(NASDAQ) }
        ];
      }
    });
  </script>
</polymer-element>