<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Hello p5.js</title>
  <script src="p5-complete-0.3.6/p5.js"></script>
  <script>

    var getSparkline = function(numbers, containerId) {
      var w = 200;
      var h = 100;
      var s = function (sketch) {
        sketch.setup = function () {
          console.log("setup1");
          sketch.createCanvas(w, h);
          console.log("setup2");
          sketch.noLoop(0);
          window.sketch = sketch;
        };

        sketch.draw = function () {
          var xstep = w / (numbers.length - 1);
          var yScale = h / 8;
          for (var i = 0; i < numbers.length - 1; ++i) {
            sketch.line(xstep * i, h - numbers[i] * yScale, xstep * (i+1), h - numbers[i+1] * yScale);
          }

        };
      };
      var myp5 = new p5(s, containerId);
    };
    window.onload = function() {
      getSparkline([1,2,4,8,4,2,1], document.getElementById("canvas001"));
      getSparkline([1,2,4,8,4,2,1], document.getElementById("canvas002"));
      //getSparkline([1,2,4,8,4,2,1], "canvas002");
    };


  </script>
</head>
<body>
<div id="canvas001"></div>
<div id="canvas002"></div>
</body>
</html>